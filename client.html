<!DOCTYPE html>
<html>

<head>
  <title>Ban/Pick Draft Demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <link rel="stylesheet" href="/style.css">
</head>

<body class="bg-light">
  <div id="main-background"></div>
  <!-- Login View -->
  <div id="login-view" class="container mt-5" style="max-width: 400px;">
    <div class="card shadow-sm">
      <div class="card-body p-4">
        <h2 class="card-title text-center mb-4">Ban/Pick</h2>
        <div class="mb-3">
          <label for="role" class="form-label">Vai trò</label>
          <select id="role" class="form-select form-select-lg">
            <option value="host">Host (Tạo phòng)</option>
            <option value="player">Player (Người chơi)</option>
          </select>
        </div>
        <div id="playerName-container" class="mb-3" style="display: none;">
          <label for="playerName" class="form-label">Tên người chơi</label>
          <input id="playerName" class="form-control form-control-lg" placeholder="Nhập tên của bạn...">
        </div>
        <div class="mb-3">
          <label for="roomId" class="form-label">ID Phòng</label>
          <input id="roomId" class="form-control form-control-lg" placeholder="Nhập ID phòng...">
        </div>
        <div class="d-grid mt-4">
          <button id="join" class="btn btn-primary btn-lg">Tham gia</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Draft View -->
  <div id="draft-view" class="container mt-3" style="display: none;">
    <!-- Host Controls Offcanvas -->
    <button id="host-controls-toggle"
      class="btn btn-warning position-fixed top-0 end-0 m-3 rounded-circle d-flex justify-content-center align-items-center d-none"
      type="button" data-bs-toggle="offcanvas" data-bs-target="#host-controls-panel" aria-controls="host-controls-panel"
      style="z-index: 1050;" aria-label="Bảng điều khiển">
      <i class="bi bi-gear-fill fs-5"></i>
    </button>

    <div class="offcanvas offcanvas-end" tabindex="-1" id="host-controls-panel"
      aria-labelledby="host-controls-panel-label">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="host-controls-panel-label"><b>Bảng điều khiển</b></h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <div id="draft-controls" class="d-flex flex-column gap-3">
          <div id="pre-draft-controls" class="btn-group w-100" role="group">
            <!-- Nút chọn player đi trước sẽ được tạo động bằng JS -->
          </div>
          <button onclick="togglePause()" class="btn btn-secondary w-100">Pause/Resume</button>
          <div class="input-group">
            <input id="countdown-input" type="number" value="30" class="form-control">
            <button onclick="setCountdown()" class="btn btn-outline-secondary">Set Countdown</button>
          </div>
          <!-- Container cho các nút kick, sẽ được tạo động bằng JS -->
          <div id="kick-buttons-container" class="d-flex flex-column gap-3"></div>
          <button onclick="closeRoom()" class="btn btn-danger w-100 mt-auto">Xóa phòng</button>
        </div>
      </div>
    </div>

    <div id="player-status" class="text-center" role="alert"></div>

    <div id="first-pick-status" class="text-center mb-2" style="font-weight: bold; color: white;"></div>

    <!-- Pre-Draft Selection View -->
    <div id="pre-draft-selection-view" style="display: none;">
      <h4 class="text-center text-white mb-3">CHỌN TƯỚNG KHÔNG SỞ HỮU</h4>
      <div class="row justify-content-center">
        <!-- Player's Own Selection Area -->
        <div class="col-12 col-md-8">
          <div class="pre-draft-player-card">
            <h5 id="pre-draft-player-name" class="text-center">Tên người chơi</h5>
            <div id="pre-draft-my-selections" class="pre-draft-selections-grid"></div>
            <div id="pre-draft-my-champ-grid-container" class="pre-draft-champ-grid-container">
              <div id="pre-draft-my-champ-grid" class="champ-grid"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="d-grid gap-2 col-4 mx-auto mt-3">
        <button id="confirm-pre-draft-button" class="btn btn-success btn-lg">Xác nhận</button>
      </div>
    </div>

    <div id="teams-container" class="row align-items-start">
      <!-- Player 1 Unowned Champs (Far Left) -->
      <div class="col-1">
        <div class="pre-draft-display-container">
          <h6 class="pre-draft-display-title">Không sở hữu</h6>
          <div id="p1-pre-draft-display" class="pre-draft-display-grid"></div>
        </div>
      </div>

      <!-- Blue Team Picks (Left Column) -->
      <div id="player1-container" class="col-2">
        <h3 style="color: blue;" class="text-center">Player 1</h3>
        <div class="picks-container">
          <div class="picks-column phase-1" id="blue-picks-p1"></div>
          <div class="picks-column phase-2" id="blue-picks-p2"></div>
        </div>
      </div>

      <!-- Bans (Center Column) -->
      <!-- Giảm từ col-8 xuống col-6 để nhường chỗ cho 2 cột mới -->
      <div class="col-6 text-center">
        <h4 style="color: white;">CẤM - CHỌN</h4>
        <div class="team justify-content-center mb-4" id="pannel-bans">
          <div class="team mt-2" id="blue-bans"></div>
          <div class="team mt-2" id="vs-bans"><img src="/assets/vs.png" alt="VS"
              style="width: 60px; filter: drop-shadow(2px 2px 5px #000);"></div>
          <div class="team mt-2" id="red-bans"></div>
        </div>

        <!-- Countdown and Champ Select moved here -->
        <div class="center-block">
          <div id="splash-art-container" class="mb-3 mt-4" style="width: 250px; height: 250px;">
            <div id="countdown-text"></div>
            <img id="splash-art-img" src="" alt="Selected Champion Splash Art">
          </div>
          <span id="splash-art-name"
            style="position: relative; z-index: 3; text-align: center; text-shadow: rgb(0, 0, 0) 1px 1px 2px;"></span>
          <div id="countdown-bar-container">
            <div id="countdown-bar"></div>
          </div>
        </div>
        <div id="champ-selection-controls" class="mt-4" style="display: none;">
          <div class="position-relative">
            <input id="champ-search" class="form-control mb-3" placeholder="Tìm kiếm tướng..." autocomplete="off">
            <span id="clear-search-btn" class="position-absolute top-50 translate-middle-y"
              style="display: none; cursor: pointer; right: 15px; z-index: 100;">
              <i class="bi bi-x-circle-fill text-secondary"></i>
            </span>
          </div>
          <div id="champ-grid-container">
            <div id="champ-grid" class="champ-grid"></div>
          </div>
          <div class="d-grid">
            <button id="lock-in-button" class="btn btn-lg mt-3" disabled>Khóa</button>
          </div>
        </div>
      </div>

      <!-- Red Team Picks (Right Column) -->
      <div id="player2-container" class="col-2">
        <h3 style="color: red;" class="text-center">Player 2</h3>
        <div class="picks-container">
          <div class="picks-column phase-1" id="red-picks-p1"></div>
          <div class="picks-column phase-2" id="red-picks-p2"></div>
        </div>
      </div>

      <!-- Player 2 Unowned Champs (Far Right) -->
      <div class="col-1">
        <div class="pre-draft-display-container">
          <h6 class="pre-draft-display-title">Không sở hữu</h6>
          <div id="p2-pre-draft-display" class="pre-draft-display-grid"></div>
        </div>
      </div>
    </div>

  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  <script src="/script.js"></script>
</body>

</html>